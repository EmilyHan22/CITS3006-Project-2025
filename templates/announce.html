{% extends "layout.html" %}
{% block content %}
<h2>Announcements (stored XSS demo)</h2>

<form method="post">
  <div>
    <label>Title</label><br>
    <input name="title" />
  </div>
  <div>
    <label>Body (HTML allowed)</label><br>
    <textarea name="body" rows="6" cols="60"></textarea>
  </div>
  <button type="submit">Post Announcement</button>
</form>

<hr>

<ul>
  {% for a in announcements %}
    <li style="margin-bottom:1rem;">
      <strong>{{ a.title }}</strong> â€” posted by {{ a.author }}<br>
      <!-- intentionally unescaped to create stored XSS -->
      <div>{{ a.body | safe }}</div>
    </li>
  {% else %}
    <li>No announcements</li>
  {% endfor %}
</ul>
{% endblock %}
